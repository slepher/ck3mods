get_forbes_mode = {
	value = 0
	add = var:forbes_mode
}

special_obligation_levels = {
	value = 0
	if = {
		limit = {
			vassal_contract_has_modifiable_obligations = yes
		}
		if = {
			limit = {
				vassal_contract_obligation_level:religious_rights != 0
			}
			add = 1
		}
		if = {
			limit = {
				vassal_contract_obligation_level:fortification_rights != 0
			}
			add = 1
		}
		if = {
			limit = {
				vassal_contract_obligation_level:coinage_rights != 0
			}
			add = 1
		}
		if = {
			limit = {
				vassal_contract_obligation_level:war_declaration_rights != 0
			}
			add = 1
		}
		if = {
			limit = {
				vassal_contract_obligation_level:council_rights != 0
			}
			add = 1
		}
		if = {
			limit = {
				vassal_contract_obligation_level:title_revocation_rights != 0
			}
			add = 1
		}
	}
}

held_county = {
	value = 0
	every_held_title = {
		limit = {
			tier = tier_county
		}
		add = 1
	}
}

held_duchy = {
	value = 0
	every_held_title = {
		limit = {
			tier = tier_duchy
		}
		add = 1
	}
}

held_kingdom = {
	value = 0
	every_held_title = {
		limit = {
			tier = tier_kingdom
		}
		add = 1
	}
}

overheld_title = {
	value = 0
	if = {
		limit = {
			held_county > 1
		}
		add = held_county
		subtract = 1
	}
	if = {
		limit = {
			held_duchy > 1
		}
		add = held_duchy
		subtract = 1
	}
	if = {
		limit = {
			held_kingdom > 1
		}
		add = held_kingdom
		subtract = 1
	}
}

military_strength = {
	value = 0
	add = max_military_strength
}

claim_values = {
	value = 0
	every_claim = {
		limit = {
			NOT = {
				holder = {
					OR = {
						target_is_same_character_or_above = root
						target_is_vassal_or_below = root
					}
				}
			}
		}
		if = {
			limit = {
				tier = tier_empire
			}
			add = 1000
		}
		else_if = {
			limit = {
				tier = tier_kingdom
			}
			add = 100
		}
		else_if = {
			limit = {
				tier = tier_duchy
			}
			add = 10
		}
		else_if = {
			limit = {
				tier = tier_county
			}
			add = 1
		}
	}
}


special_obligation_religious_rights = {
	value = 0
	if = {
		limit = {
			vassal_contract_obligation_level:religious_rights != 0
		}
		add = 1
	}
}

special_obligation_fortification_rights = {
	value = 0
	if = {
		limit = {
			vassal_contract_obligation_level:fortification_rights != 0
		}
		add = 1
	}
}

special_obligation_coinage_rights = {
	value = 0
	if = {
		limit = {
			vassal_contract_obligation_level:coinage_rights != 0
		}
		add = 1
	}
}

special_obligation_war_declaration_rights = {
	value = 0
	if = {
		limit = {
			vassal_contract_obligation_level:war_declaration_rights != 0
		}
		add = 1
	}
}

special_obligation_council_rights = {
	value = 0
	if = {
		limit = {
			vassal_contract_obligation_level:council_rights != 0
		}
		add = 1
	}
}

special_obligation_title_revocation_rights = {
	value = 0
	if = {
		limit = {
			vassal_contract_obligation_level:title_revocation_rights != 0
		}
		add = 1
	}
}

forbes_visible_main_tabs = {
    value = 0

    # 政府管理类按钮
    # 原本想用 has_government_rule = noble_families，但不存在
    # 可以通过判断以下政府类型是否存在 rule noble_families
    if = {
        limit = {
            OR = {
                has_government = administrative_government
                has_government = celestial_government
                has_government = steppe_admin_government
                has_government = meritocratic_government
                has_government = japan_feudal_government
                has_government = japan_administrative_government
            }
        }
        add = 1
    }

    # 我的领地（固定显示）
    add = 1

    # 军事（固定显示）
    add = 1

    # 枢密院（无地冒险者不可见）
    if = {
        limit = { NOT = { is_landless_adventurer = yes } }
        add = 1
    }

    # 宫廷（始终显示）
    add = 1

    # 阴谋（固定显示）
    add = 1

    # 派系（固定显示）
    add = 1
    # 如果需要条件判断（如角色在派系、有领地或有封臣），可使用 scripted_value 风格：
    # if = {
    #     limit = {
    #         OR = {
    #             is_in_faction = yes
    #             is_landed = yes
    #             has_liege = yes
    #         }
    #     }
    #     add = 1
    # }

    # 决策 / 合约（无地冒险者不可见）
    if = {
        limit = { NOT = { has_government = landless_adventurer_government } }
        add = 1
    }

    # 活动（固定显示）
    add = 1

    # 情势（固定显示）
    add = 1

    # 皇家宫廷（需要皇家宫廷 DLC 且非无地冒险者）
    if = {
        limit = {
            has_royal_court = yes
            has_dlc_feature = court_room_view
            NOT = { is_landless_adventurer = yes }
        }
        add = 1
    }

    # 税务管辖（氏族制政府可见）
    if = {
        limit = { has_government = clan_government }
        add = 1
    }
}